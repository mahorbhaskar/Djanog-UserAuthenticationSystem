{% extends 'main.html' %}
{% block content %}

<section class="">
          <div class="col-lg-7 px-5 pt-5">
              <h4 class="alert alert-primary col-lg-7">Add Product</h4>
          <form action="" method="POST" enctype="multipart/form-data">
              {% csrf_token %}
              <div class="form-row">
                  <div class="col-lg-7">
                <label for="exampleInputEmail1">Product Name</label>
                <input type="text" name="product_name" class="form-control" required>
                  </div>
              </div>
              <!-- Product Description -->
              <div class="form-row">
                  <div class="col-lg-7">
                <label for="exampleInputEmail1">Product Description</label>
                <textarea rows="5" name="product_description" class="form-control" required></textarea>
                  </div>
              </div>
              <!-- Upload Images -->
              <div class="form-row">
                  <div class="col-lg-7">
                <label for="exampleInputPassword1">Choose Images:</label>
                <input type="file" id="images" name="images" multiple required>
                <div id="imgPreview" class="border"></div>
                <div id="coverImage"></div>
                  </div>
              </div>
              <!-- Submit Button -->
              <div class="form-row mt-2">
                  <div class="col-lg-7">
                      <button type="submit" id="save" class="btn btn-primary btn-block">Submit</button>
                  </div>
              </div>
          </form>
      </div>
  </div>

</section>
<script>
  function index(i){
    var div = document.getElementById(i);
    $(".divv").removeClass('afterImgPreview').css("border-color","black");
    $(div).toggleClass('afterImgPreview').css("border-color","red");
    var div = document.getElementById("coverImage");
    console.log("inside function "+i);
    html='';
    html=`<input type="hidden" value="${i+1}" class="form-control" placeholder="enter your coverimage number" id="coverImageIndex" name="coverImageIndex"/>`; 
    div.innerHTML=html;
  }
  images.onchange = evt =>{
  $('#imgPreview').html('');
  const[file]=images.files;
  var url = URL.createObjectURL(file);
  console.log(images.files[0]);
  var div = document.getElementById("imgPreview");
  var html='';
  for (let i=0;i<images.files.length;i++){
    var info=images.files[i];
    url=URL.createObjectURL(info);
    html += `<img onclick="index(${i})" src="${url}" id="${i}" class="imgPreview divv" alt="images" height="100px"/>`;}
    html+=`<br><small>click on image to choose a cover image</small>`; 
  div.innerHTML=html;}
</script>
{% endblock content %}